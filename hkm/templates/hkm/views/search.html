{% extends 'hkm/base_browse.html' %}
{% load i18n %}
{% load hkm_tags %}

{% block page_title %}
  <title>{% trans 'Search pictures' %} {% if search_term %}{% trans 'With word' %} {{ search_term }}{% endif %}</title>
{% endblock %}

{% block banner %}

  <div class="page-header bittersweet">
    <div class="fullsize-container">
      <div class="banner__title">
        {% if search_term %}
        <h1 class="banner__h1">{{ search_result.resultCount }} {% trans 'Records' %}</h1>
        {% else %}
        <h1 class="banner__h1">{% trans 'Search pictures' %}</h1>
        {% endif %}
      </div>
      <div class="search-area-wrapper">
        <form>
          <div class="search-term-wrapper">
            <input class="search-input" placeholder="{% trans 'Search' %}" type="text" name="search" {% if search_term %} value="{{ search_term }}"{% endif %} />
            <button aria-label="{% trans 'Search' %}" class="hkm-button hkm-button__filled" type="submit">{% trans 'Search' %}</button>
          </div>
        </form>

        <div class="extra-filters-wrapper-desktop">
          {% include 'hkm/snippets/search_extra_filters.html' %}
        </div>
        <div class="extra-filters-wrapper-mobile">
          <button id="extra-filter-toggle-more">Enemmän hakuehtoja</button>
          <button id="extra-filter-toggle-less" class="hidden">Vähemmän hakuehtoja</button>
          {% include 'hkm/snippets/search_extra_filters.html' %}
        </div>

      </div>

      <div class="keyword-wrapper">
        {% for author in author_facets %}
        <div class="keyword">
          {{ author }}
          <a href="#" class="search-filter__delete" data-facet-type="author" data-author-facet="{{ author }}">
            <svg class="keyword-icon">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>
            </svg>
          </a>
        </div>
        {% endfor %}
        {% for date in date_facets %}
        <div class="keyword">
          {{ date }}
          <a href="#" class="search-filter__delete" data-facet-type="date" data-author-facet="{{ date }}">
            <svg class="keyword-icon">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>
            </svg>
          </a>
        </div>
        {% endfor %}
      </div>

    </div>

  </div>

{% endblock %}

{% block content %}

  <div class="fullsize-container">

    {% if search_result.records %}


    <div class="grid flex-images infinite-scroll" data-pages="{{ search_result.pages }}">
      {% include 'hkm/snippets/search_records_grid.html' %}
    </div>
    <button id="btn-load-more" class="btn-load-more btn btn-primary btn-lg btn-block" data-current-page="{{ current_page }}">{% trans 'Load more...' %}</button>


    {% else %}

      {% include 'hkm/snippets/no_results.html' %}

    {% endif %}

  </div> <!-- fullsize-container -->

{% endblock %}

{% block footer %}{% endblock %}

{% block extra_js %}
    {# Gives access to translated "no more results" text in js code #}
    <script>
        window.NO_MORE_SEARCH_RESULTS_TEXT = "{% trans 'No more results' %}";
    </script>
{% endblock %}
