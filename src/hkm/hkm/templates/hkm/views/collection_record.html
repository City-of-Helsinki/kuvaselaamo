{% extends 'hkm/base_viewer.html' %}
{% load hkm_tags %}
{% load i18n %}

{% block viewer_arrows %}

  {% if previous_record %}
    <a href="{% url 'hkm_collection' collection_id=collection.id %}?rid={{ previous_record.id }}" class="image-viewer-arrow arrow-left"><img src="/static/hkm/img/arrow_left.png"></img></a>
  {% endif %}
  {% if next_record %}
    <a href="{% url 'hkm_collection' collection_id=collection.id %}?rid={{ next_record.id }}" class="image-viewer-arrow arrow-right"><img src="/static/hkm/img/arrow_right.png"></img></a>
  {% endif %}

{% endblock %}

{% block content %}

  <div class="image-viewer"><img src="{% finna_image record.record_id %}"></img></div>

{% endblock %}

{% block modals %}

  <div class="my-modal base-modal--crop modal fade" id="crop-and-download" tabindex="-1" role="dialog">
    <div class="my-modal__dialog my-modal__dialog--crop-lg modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">{% trans 'Crop and download' %}</h4>
        </div>
        <div class="modal-body row">
          <div class="col-md-4">
            foo
          </div>
          <div class="col-md-8">
            <div class="crop__container">
              <img class="crop__image" data-record-id="{{ record.record_id }}"></img>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">{% trans 'Close' %}</button>
          <button class="crop__submit btn btn-primary" id="submit-crop" type="button" value="add-to-collection">{% trans 'Submit' %}</button>
        </div>
      </div>
    </div>
  </div>

  <div class="my-modal base-modal--crop modal fade" id="crop-and-add" tabindex="-1" role="dialog">
    <div class="my-modal__dialog my-modal__dialog--crop-lg modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">{% trans 'Crop and add to collection' %}</h4>
        </div>
        <div class="modal-body row">
          <div class="col-md-4">
            <form id="add-to-collection" method="POST">
              {% csrf_token %}
              <input type="hidden" name="action" value="add-to-collection" />
              <input type="hidden" name="record_id" value="{{ record.id }}" />
              <input class="form-control" type="text" name="new_collection_name" value="{% trans 'Uusi kokoelma' %}"></input>
              <button class="btn btn-primary" type="submit" value="add-to-collection">{% trans 'Submit' %}</button>
            </form>
          </div>
          <div class="col-md-8">
            <div class="crop__container">
              <img class="crop__image" data-record-id="{{ record.record_id }}"></img>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">{% trans 'Close' %}</button>
          <button class="crop__submit btn btn-primary" type="button" value="add-to-collection">{% trans 'Submit' %}</button>
        </div>
      </div>
    </div>
  </div>

{% endblock %}

{% block hidden %}
  {% include 'hkm/snippets/popover_cart.html' with full_res_image_url=record.get_full_res_image_absolute_url web_image_url=record.record_id|finna_default_image_url finna_id=record.record_id %}
  {% include 'hkm/snippets/popover_info.html' with finna_id=record.record_id %}
  {% include 'hkm/snippets/popover_add.html' with full_res_image_url=record.get_full_res_image_absolute_url web_image_url=record.record_id|finna_default_image_url %}
{% endblock %}
