{% extends 'hkm/base_browse.html' %}
{% load i18n %}
{% load hkm_tags %}

{% block banner %}

  <div class="page-header bittersweet">
    <div class="fullsize-container container">
      <div class="banner__title">
        <h1 class="banner__h1">{{ search_result.resultCount }} {% trans 'Records' %}</h1>
      </div>
      <form class="search-form search-form--banner form-group">
        <div class="search-form__content input-group">
          <input class="search-form__field form-control" type="text" name="search" {% if search_term %} value="{{ search_term }}"{% endif %} />
          <span class="search-form__btn-container input-group-btn">
            <button class="search-form__btn btn btn-default" type="submit"><img src="/static/hkm/img/suurennuslasi.png"></img></button>
          </span>
        </div>
      </form>
    </div>
  </div>

{% endblock %}

{% block content %}

  <div class="fullsize-container container">

    {% if search_result.records %}

    <div class="sidebar col-md-2">

      <ul class="list-group list-group-root" id="accordion">
        <li class="list-group__item list-group-item">
          <span class="caret"></span>
          <a data-toggle="collapse" data-parent="#accordion" href="#collapse-author">{% trans 'Author' %}</a>
          <ul id="collapse-author" class="list-group panel-collapse collapse {% if facet_type == 'author_facet' %}in{% endif %}">
            {% for author in facet_result.facets.author_facet %}
              <li class="list-group__item list-group-item"><a class="list-group__link {% if facet_value == author.value %}active{% endif %}" href="?search={{ search_term }}&author[]={{ author.value }}&main_date_str[]={{ date_facet.value }}">{{ author.translated }} - ({{ author.count }})</a></li>
            {% endfor %}
          </ul>
        </li>
        <li class="list-group__item list-group-item">
          <span class="caret"></span>
          <a data-toggle="collapse" data-parent="#accordion" href="#collapse-year">{% trans 'Year' %}</a>
          <ul id="collapse-year" class="list-group panel-collapse collapse {% if facet_type == 'main_date_str' %}in{% endif %}">
            {% for date_facet in facet_result.facets.main_date_str %}
              <li class="list-group__item list-group-item"><a class="list-group__link {% if facet_value == date_facet.value %}active{% endif %}" href="?search={{ search_term }}&author[]={{ author.value }}&main_date_str[]={{ date_facet.value }}">{{ date_facet.translated }} - ({{ date_facet.count }})</a></li>
            {% endfor %}
          </ul>
        </li>
      </ul>

    </div>

    <div class="article col-md-10">

      <div class="grid flex-images infinite-scroll" data-pages="{{ search_result.pages }}">
        {% include 'hkm/snippets/search_records_grid.html' %}
      </div>

    </div>

    {% else %}

      <div class="status-page">
        <img class="status-page__image" src="/static/hkm/img/no-results-image.jpg"></img>
        <h1 class="status-page__title">{% trans 'This image is probably not what you are looking for' %}</h1>
        <ul class="status-page__list">
          <li>{% trans "It's possible, that something has been happening in the service." %}</li>
          <li>{% trans "You might have written the address wrong." %}</li>
          <li>{% trans "Or the stars are just misordered." %}</li>
        </ul>
        <p class="status-page__paragraph">{% trans 'Hopefully a new search will fix the situation.' %}</p>
      </div>

    {% endif %}

  </div> <!-- fullsize-container -->

{% endblock %}
