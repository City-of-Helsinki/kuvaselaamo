{% extends 'hkm/base_collection.html' %}
{% load i18n %}
{% load hkm_tags %}

{% block image_block %}

  <div class="page-header">
    <div class="container">
      <h1>{% trans 'KOKOELMA' %}</h1>
    </div>
  </div>

  <div class="container">

    <div class="form-group search-form">
      <form>
        <div class="input-group">
          <input class="form-control" type="text" name="search" {% if search_term %} value="{{ search_term }}"{% endif %} />
          <span class="input-group-btn">
            <button class="btn btn-default" type="submit"><img src="/static/hkm/img/suurennuslasi.png"></img></button>
          </span>
        </div>
      </form>
    </div>

  </div>

{% endblock %}

{% block content %}

  <div class="container">


    <div class="search-sidebar">

      <!-- All facets : {{ facet_result.facets.keys }} -->

      <ul class="list-group list-group-root well" id="accordion">

        <li class="list-group-item">
          <span class="caret"></span>
          <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">{% trans 'Tekij√§' %}</a>
          <ul id="collapseTwo" class="list-group panel-collapse collapse">
            {% for author in facet_result.facets.author_facet %}
              <li class="list-group-item"><a href="?search={{ search_term }}&ft=author_facet&fv={{ author.value }}">{{ author.translated }} - ({{ author.count }})</a></li>
            {% endfor %}
          </ul>
        </li>
        <li class="list-group-item">
          <span class="caret"></span>
          <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">{% trans 'Vuosi' %}</a>
          <ul id="collapseOne" class="list-group panel-collapse collapse">
            {% for date_facet in facet_result.facets.main_date_str %}
              <li class="list-group-item"><a href="?search={{ search_term }}&ft=main_date_str&fv={{ date_facet.value }}">{{ date_facet.translated }} - ({{ date_facet.count }})</a></li>
            {% endfor %}
          </ul>
        </li>

      </ul>

    </div>

    <div class="search-results">

      <!-- <h1>Search Results {{ search_result.page }}/{{ search_result.pages }} {{ search_result.resultCount }}</h1> -->

      <div class="grid">
        {% for record in search_result.records %}
          <div class="item">
            <div class="item-content">
              <!-- {{ record }} -->
                <img src="{% finna_image record.id w=170 h=170 %}"></img>
            </div>
          </div>
        {% endfor %}
      </div>

      <script>
        var grid = new Muuri({
          container: document.getElementsByClassName('grid')[0],
          items: document.getElementsByClassName('item')
        });
      </script>

    </div>

  </div> <!-- Container -->

{% endblock %}
